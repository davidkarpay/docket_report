{
  "domain": "jiswebprod.mypalmbeachclerk.com",
  "name": "Palm Beach County Clerk of Courts",
  "description": "ShowCase Web - Print View Extraction (Production Ready)",
  "version": "3.1.0",
  "lastUpdated": "2025-01-19",
  "testedWith": "4 cases validated: 50-2025-MM-006375-AXXX-MB, 50-2017-MM-013394-AXXX-MB, 50-2017-CF-009771-AXXX-MB, 50-2017-MM-012630-AXXX-NB",

  "extractionStrategy": "print_view_recommended",
  "printViewUrl": "#!/print/preview (click Print button on case details)",
  "printViewAdvantages": [
    "All sections loaded in single page",
    "Consistent table structure",
    "No tab switching required",
    "Faster extraction (one request vs 9)"
  ],

  "waitForAngular": true,
  "delayMs": 2000,

  "fields": {

    "caseHeader": {
      "_notes": "Header fields use label-based XPath pattern",

      "caseNumber": {
        "xpath": "//b[contains(text(), 'Case #:')]/following-sibling::text()[1]",
        "example": "50-2025-MM-006375-AXXX-MB",
        "transform": "trim",
        "priority": 1
      },
      "status": {
        "xpath": "//b[contains(text(), 'Status:')]/following-sibling::text()[1]",
        "example": "Open",
        "transform": "trim",
        "priority": 1
      },
      "fullName": {
        "xpath": "//b[contains(text(), 'Full Name:')]/following-sibling::text()[1]",
        "example": "ROPER, ANTONIO BERNARD",
        "transform": "trim",
        "priority": 1
      },
      "partyType": {
        "xpath": "//b[contains(text(), 'Party Type:')]/following-sibling::text()[1]",
        "example": "DEFENDANT",
        "transform": "trim",
        "priority": 1
      },
      "aka": {
        "xpath": "//b[contains(text(), 'AKA:')]/following-sibling::text()[1]",
        "example": "ROPER, ANTONIO B",
        "transform": "trim",
        "priority": 2
      },
      "dob": {
        "xpath": "//b[contains(text(), 'DOB:')]/following-sibling::text()[1]",
        "example": "09/18/1986",
        "transform": "parseDate",
        "priority": 1
      },
      "division": {
        "xpath": "//b[contains(text(), 'Division:')]/following-sibling::text()[1]",
        "example": "DVTD: Dom Battery & DVRV Inj Hearings - DVTD",
        "transform": "trim",
        "priority": 1
      },
      "bookingNumber": {
        "xpath": "//b[contains(text(), 'Booking #:')]/following-sibling::text()[1]",
        "example": "2025015876",
        "transform": "trim",
        "priority": 2
      },
      "dlNumber": {
        "xpath": "//b[contains(text(), 'DLNumber:')]/following-sibling::text()[1]",
        "example": "R160002863380",
        "transform": "trim",
        "priority": 3
      },
      "mjNumber": {
        "xpath": "//b[contains(text(), 'MJ #:')]/following-sibling::text()[1]",
        "example": "0559082",
        "transform": "trim",
        "priority": 3
      },
      "citationNumber": {
        "xpath": "//b[contains(text(), 'Citation #:')]/following-sibling::text()[1]",
        "example": "",
        "transform": "trim",
        "priority": 3
      },
      "judge": {
        "xpath": "//b[contains(text(), 'Judge:')]/following-sibling::text()[1]",
        "example": "BURKE, LAUREN",
        "transform": "trim",
        "priority": 2,
        "notes": "NEW FIELD - discovered in print view"
      },
      "stateAttorney": {
        "xpath": "//b[contains(text(), 'State Attorney:')]/following-sibling::text()[1]",
        "example": "LYLE, CHAD AVERY",
        "transform": "trim",
        "priority": 2,
        "notes": "NEW FIELD - discovered in print view"
      },
      "publicDefender": {
        "xpath": "//b[contains(text(), 'Public Defender:')]/following-sibling::text()[1]",
        "example": "KARPAY, DAVID",
        "transform": "trim",
        "priority": 2,
        "notes": "NEW FIELD - discovered in print view"
      }
    },

    "parties": {
      "_extractionType": "array",
      "_tableStructure": "14 columns",
      "_xpath": "//section[contains(@id, 'parties') or .//h4[text()='Parties']]/following-sibling::table[1]//tbody/tr | //h4[text()='Parties']/following-sibling::table[1]//tbody/tr",
      "_notes": "Extract all party rows. Each row has 14 columns.",

      "columns": {
        "fullName": {"position": 1, "example": "ROPER, ANTONIO BERNARD"},
        "partyType": {"position": 2, "example": "DEFENDANT"},
        "dateOfBirth": {"position": 3, "example": "09/18/1986", "transform": "parseDate"},
        "sex": {"position": 4, "example": "M"},
        "race": {"position": 5, "example": "Black"},
        "aka": {"position": 6, "example": "ROPER, ANTONIO B"},
        "height": {"position": 7, "example": "5'08\""},
        "weight": {"position": 8, "example": "150"},
        "hair": {"position": 9, "example": "BROWN"},
        "eyes": {"position": 10, "example": "BROWN"},
        "licenseNumber": {"position": 11, "example": "FL-R160002863380"},
        "dlExpDate": {"position": 12, "example": "", "transform": "parseDate"},
        "deceased": {"position": 13, "example": ""},
        "sheriffsNumber": {"position": 14, "example": "0559082"}
      },

      "extractionExample": {
        "fullName": "ROPER, ANTONIO BERNARD",
        "partyType": "DEFENDANT",
        "dateOfBirth": "1986-09-18",
        "sex": "M",
        "race": "Black",
        "aka": "ROPER, ANTONIO B",
        "height": "5'08\"",
        "weight": "150",
        "hair": "BROWN",
        "eyes": "BROWN",
        "licenseNumber": "FL-R160002863380",
        "sheriffsNumber": "0559082"
      }
    },

    "charges": {
      "_extractionType": "array",
      "_tableStructure": "12 columns",
      "_xpath": "//section[contains(@id, 'charges') or .//h4[text()='Charges']]/following-sibling::table[1]//tbody/tr | //h4[text()='Charges']/following-sibling::table[1]//tbody/tr",
      "_notes": "Extract all charge rows. Each row has 12 columns.",

      "columns": {
        "count": {"position": 1, "example": "1"},
        "statuteNumber": {"position": 2, "example": "784.03(1)"},
        "description": {"position": 3, "example": "BATTERY (DOMESTIC)"},
        "disposition": {"position": 4, "example": ""},
        "dispositionDate": {"position": 5, "example": "06/16/2025", "transform": "parseDate"},
        "sentence": {"position": 6, "example": ""},
        "offenseDate": {"position": 7, "example": "", "transform": "parseDate"},
        "sentenceStatus": {"position": 8, "example": ""},
        "citationNumber": {"position": 9, "example": ""},
        "offenseLevel": {"position": 10, "example": "MF"},
        "plea": {"position": 11, "example": "NOT GUILTY"},
        "pleaDate": {"position": 12, "example": "08/04/2025", "transform": "parseDate"}
      },

      "extractionExample": {
        "count": "1",
        "statuteNumber": "784.03(1)",
        "description": "BATTERY (DOMESTIC)",
        "offenseLevel": "MF",
        "plea": "NOT GUILTY",
        "pleaDate": "2025-08-04"
      }
    },

    "dockets": {
      "_extractionType": "array",
      "_tableStructure": "8 columns (Image checkbox + 7 data columns)",
      "_xpath": "//section[contains(@id, 'dockets') or .//h4[text()='Dockets']]/following-sibling::table[1]//tbody/tr | //h4[text()='Dockets']/following-sibling::table[1]//tbody/tr",
      "_notes": "Dockets is the most comprehensive section - contains bond info, charges, pleas, hearings. Extract ALL rows.",

      "columns": {
        "image": {"position": 1, "example": "(checkbox)", "skip": true},
        "docketNumber": {"position": 2, "example": "2"},
        "effectiveDate": {"position": 3, "example": "06/17/2025", "transform": "parseDate"},
        "count": {"position": 4, "example": "0"},
        "description": {"position": 5, "example": "DIVISION ASSIGNMENT"},
        "docketText": {"position": 6, "example": "S: Felony - S (Circuit)"},
        "book": {"position": 7, "example": ""},
        "page": {"position": 8, "example": ""}
      },

      "importantEntries": {
        "bondInfo": "Look for 'BOND SET AT' in description",
        "chargesFiled": "Look for 'INFORMATION FILED' in description",
        "pleas": "Look for 'GUILTY PLEA' or 'NOT GUILTY PLEA' in description",
        "hearings": "Look for 'CONTINUED TO' or 'SET FOR' in description"
      },

      "extractionExample": {
        "docketNumber": "18",
        "effectiveDate": "2025-06-17",
        "count": "1",
        "description": "BOND SET AT 1,000.00",
        "docketText": "1,000.00"
      }
    },

    "linkedCases": {
      "_extractionType": "array",
      "_tableStructure": "4 columns",
      "_xpath": "//section[contains(@id, 'relatedcases') or .//h4[text()='Linked Cases']]/following-sibling::table[1]//tbody/tr | //h4[text()='Linked Cases']/following-sibling::table[1]//tbody/tr",
      "_notes": "Extract related case numbers and statuses",

      "columns": {
        "caseNumber": {"position": 1, "example": "50-2025-CF-004857-AXXX-MB"},
        "caseDescription": {"position": 2, "example": "ROPER, ANTONIO BERNARD"},
        "offenseDate": {"position": 3, "example": "06/16/2025", "transform": "parseDate"},
        "status": {"position": 4, "example": "Closed"}
      },

      "extractionExample": {
        "caseNumber": "50-2025-CF-004857-AXXX-MB",
        "caseDescription": "ROPER, ANTONIO BERNARD",
        "offenseDate": "2025-06-16",
        "status": "Closed"
      }
    },

    "sentences": {
      "_extractionType": "array",
      "_tableStructure": "8 columns",
      "_xpath": "//section[contains(@id, 'sentences') or .//h4[text()='Sentences']]/following-sibling::table[1]//tbody/tr | //h4[text()='Sentences']/following-sibling::table[1]//tbody/tr",
      "_handleEmpty": "Return [] if 'No records found' text present",

      "columns": {
        "date": {"position": 1, "transform": "parseDate"},
        "count": {"position": 2},
        "sentence": {"position": 3},
        "confinement": {"position": 4},
        "term": {"position": 5},
        "creditTime": {"position": 6},
        "conditions": {"position": 7},
        "status": {"position": 8}
      }
    },

    "warrants": {
      "_extractionType": "array",
      "_tableStructure": "6 columns",
      "_xpath": "//section[contains(@id, 'warrants') or .//h4[text()='Warrants/Service Docs']]/following-sibling::table[1]//tbody/tr | //h4[text()='Warrants/Service Docs']/following-sibling::table[1]//tbody/tr",
      "_handleEmpty": "Return [] if 'No records found' text present",

      "columns": {
        "warrantType": {"position": 1},
        "warrantNumber": {"position": 2},
        "issueDate": {"position": 3, "transform": "parseDate"},
        "lastActionDate": {"position": 4, "transform": "parseDate"},
        "statusReason": {"position": 5},
        "lastAction": {"position": 6}
      }
    },

    "arrests": {
      "_extractionType": "multi_table",
      "_notes": "Arrests & Bonds section contains 2 separate tables",

      "arrestsTable": {
        "_tableNumber": 1,
        "_tableStructure": "5 columns",
        "_xpath": "//section[contains(@id, 'arrests') or .//h4[contains(text(),'Arrests')]][1]/following-sibling::table[1]//tbody/tr | //h4[contains(text(),'Arrests & Bonds')]/following-sibling::table[1]//tbody/tr",

        "columns": {
          "arrestOffenseDate": {"position": 1, "example": "06/16/2025", "transform": "parseDate"},
          "arrestingAgency": {"position": 2, "example": "PBSO - PALM BEACH COUNTY SHERIFF OFFICE"},
          "agencyNumber": {"position": 3, "example": "06"},
          "bookingNumber": {"position": 4, "example": "2025015876"},
          "incidentNumber": {"position": 5, "example": "0625071129"}
        },

        "extractionExample": {
          "arrestOffenseDate": "2025-06-16",
          "arrestingAgency": "PBSO - PALM BEACH COUNTY SHERIFF OFFICE",
          "agencyNumber": "06",
          "bookingNumber": "2025015876",
          "incidentNumber": "0625071129"
        }
      },

      "bondsTable": {
        "_tableNumber": 2,
        "_tableStructure": "11 columns",
        "_xpath": "//h4[contains(text(),'Arrests & Bonds')]/following-sibling::table[2]//tbody/tr",
        "_handleEmpty": "Return [] if 'No records found'",
        "_fallbackStrategy": "If empty, search Dockets for 'BOND SET AT' entries",
        "_notes": "Bonds table often contains data. 3/4 test cases had 1-5 bond records. Only use Dockets fallback if empty.",
        "_bondTypes": ["Per Schedule", "None", "Court Ordered", "SOR I (Supervised Own Recognizance)", "Surety"],

        "columns": {
          "bondNumber": {"position": 1},
          "type": {"position": 2, "example": "Per Schedule, None, Court Ordered, SOR I"},
          "count": {"position": 3},
          "bondsman": {"position": 4},
          "depositor": {"position": 5},
          "suretyCompany": {"position": 6},
          "closedDate": {"position": 7, "transform": "parseDate"},
          "amount": {"position": 8, "transform": "parseNumber", "example": "$500.00, $0.00, $15,000.00"},
          "forfeitureDate": {"position": 9, "transform": "parseDate"},
          "effectiveDate": {"position": 10, "transform": "parseDate"},
          "status": {"position": 11, "example": "Closed"}
        }
      }
    },

    "fees": {
      "_extractionType": "multi_table",
      "_notes": "Fees section contains 2-3 separate tables + summary header",

      "summary": {
        "_extractFrom": "text_header",
        "_pattern": "Total Balance \\+ Interest:\\s*\\$?([\\d,]+\\.\\d{2})",
        "_xpath": "//h4[text()='Fees']/following-sibling::text()[contains(., 'Total Balance')]",

        "totalBalance": {
          "example": "$50.00",
          "transform": "parseNumber",
          "notes": "Extract from 'Total Balance + Interest: $50.00' text"
        }
      },

      "feeItemsTable": {
        "_tableNumber": 1,
        "_tableStructure": "9 columns",
        "_xpath": "//h4[text()='Fees']/following-sibling::table[1]//tbody/tr[not(contains(., 'No records found'))]",

        "columns": {
          "effectiveDate": {"position": 1, "example": "06/17/2025", "transform": "parseDate"},
          "dueDate": {"position": 2, "example": "06/17/2025", "transform": "parseDate"},
          "description": {"position": 3, "example": "Indigent PD Application Fee PB"},
          "amountDue": {"position": 4, "example": "$50.00", "transform": "parseNumber"},
          "amountPaid": {"position": 5, "example": "$0.00", "transform": "parseNumber"},
          "balance": {"position": 6, "example": "$50.00", "transform": "parseNumber"},
          "inCollections": {"position": 7, "example": ""},
          "inJudgment": {"position": 8, "example": ""},
          "judgmentInterest": {"position": 9, "example": "$0.00", "transform": "parseNumber"}
        },

        "extractionExample": {
          "effectiveDate": "2025-06-17",
          "dueDate": "2025-06-17",
          "description": "Indigent PD Application Fee PB",
          "amountDue": 50.00,
          "amountPaid": 0.00,
          "balance": 50.00
        }
      },

      "paymentPlansTable": {
        "_tableNumber": 2,
        "_tableStructure": "5 columns",
        "_xpath": "//h4[text()='Fees']/following-sibling::table[2]//tbody/tr",
        "_handleEmpty": "Return [] if 'No records found'",

        "columns": {
          "plan": {"position": 1},
          "planNumber": {"position": 2},
          "scheduledPayAmount": {"position": 3, "transform": "parseNumber"},
          "balanceDue": {"position": 4, "transform": "parseNumber"},
          "partialPayment": {"position": 5, "transform": "parseNumber"}
        }
      }
    },

    "courtEvents": {
      "_status": "NOT_IN_PRINT_VIEW",
      "_notes": "Court Events section does NOT render in print view. Must extract from standard case details view instead.",
      "_alternativeSource": "Use standard case details page, Court Events tab",
      "_xpath": "//section[@id='courtevents']//table//tbody/tr",
      "_recommendation": "Extract from web view before clicking Print, or skip this section in print view extraction"
    }
  },

  "tableExtraction": {
    "_notes": "Configuration for extracting multiple cases from Court Events Calendar table view",
    "_pageType": "MULTI_CASE_TABLE",
    "_usage": "Automatically used when page is detected as calendar/table view (e.g., #!/calendar)",

    "rowSelector": "table[datatable] tbody tr:not(.ng-hide), table.dataTable tbody tr:not(.ng-hide)",

    "columns": [
      {
        "index": 0,
        "field": "procd",
        "skip": true,
        "description": "Proc'd checkbox column - excluded per user request"
      },
      {
        "index": 1,
        "field": "caseNumber",
        "extractLink": true,
        "transform": "trim",
        "description": "Case number (usually a clickable link)"
      },
      {
        "index": 2,
        "field": "name",
        "transform": "trim",
        "description": "Defendant name (Last, First)"
      },
      {
        "index": 3,
        "field": "dob",
        "transform": "trim",
        "description": "Date of birth (MM/DD/YYYY)"
      },
      {
        "index": 4,
        "field": "statuteDescription",
        "transform": "trim",
        "description": "Charge descriptions (comma-separated if multiple charges)"
      },
      {
        "index": 5,
        "field": "defenseAttorney",
        "transform": "trim",
        "description": "Defense attorney name"
      },
      {
        "index": 6,
        "field": "stateAttorney",
        "transform": "trim",
        "description": "State attorney name"
      },
      {
        "index": 7,
        "field": "publicDefender",
        "transform": "trim",
        "description": "Public defender name"
      },
      {
        "index": 8,
        "field": "witnesses",
        "transform": "trim",
        "description": "Witness information"
      },
      {
        "index": 9,
        "field": "speedy",
        "transform": "trim",
        "description": "Speedy trial information"
      },
      {
        "index": 10,
        "field": "offenseDate",
        "transform": "trim",
        "hidden": true,
        "description": "Offense date - date of the alleged crime (hidden column)"
      },
      {
        "index": 11,
        "field": "courtDate",
        "transform": "trim",
        "description": "Scheduled court date from the calendar (MM/DD/YYYY)"
      },
      {
        "index": 12,
        "field": "officerWitness",
        "transform": "trim",
        "hidden": true,
        "description": "Officer witness name (hidden column)"
      },
      {
        "index": 13,
        "field": "statuteNumbers",
        "transform": "trim",
        "hidden": true,
        "description": "Full statute numbers (e.g., 784.03(1A2),784.011(1),843.02) (hidden column)"
      },
      {
        "index": 14,
        "field": "status",
        "transform": "trim",
        "hidden": true,
        "description": "Case status: Open/Closed/Reopen VOP (hidden column)"
      },
      {
        "index": 15,
        "field": "jailCell",
        "transform": "trim",
        "hidden": true,
        "description": "Jail cell information (hidden column)"
      },
      {
        "index": 16,
        "field": "courtEventType",
        "transform": "trim",
        "hidden": true,
        "description": "Court event type code: MH (Motion Hearing), CD (Calendar), PC (Pretrial Conference), STCK (Status Check) (hidden column)"
      },
      {
        "index": 17,
        "field": "courtroom",
        "transform": "trim",
        "hidden": true,
        "description": "Courtroom location (e.g., '2C (Main Branch)') (hidden column)"
      }
    ]
  },

  "extractionNotes": {
    "printViewBehavior": {
      "allSectionsLoaded": "Print view loads all 9 sections in single page (except Court Events)",
      "courtEventsMissing": "Court Events table does not render in print view - extract from web view first",
      "emptyTables": "Sentences, Warrants, Bonds tables may show 'No records found' - return []",
      "multiTableSections": "Arrests (2 tables) and Fees (2-3 tables) require separate extraction"
    },

    "dataFallbacks": {
      "bondInfo": "If Bonds table empty, extract from Dockets (look for 'BOND SET AT' entries)",
      "courtEvents": "If print view doesn't show events, extract from web view Court Events tab first",
      "judgeInfo": "Judge name appears in both header AND docket entries"
    },

    "emptyTableDetection": {
      "pattern": "tbody/tr contains text 'No records found'",
      "action": "Return empty array [] for that section"
    },

    "recommendedWorkflow": [
      "1. Navigate to case details page",
      "2. Optional: Extract Court Events from web view (if needed)",
      "3. Click Print button",
      "4. Wait 2-3 seconds for Angular to render all sections",
      "5. Extract all remaining sections from print view",
      "6. Combine Court Events (from step 2) with print view data (from step 5)"
    ]
  },

  "testing": {
    "testCases": [
      {
        "caseNumber": "50-2025-MM-006375-AXXX-MB",
        "defendant": "ROPER, ANTONIO BERNARD",
        "caseType": "MM (Misdemeanor)",
        "status": "Open",
        "sectionsWithData": ["Header", "Parties", "Charges", "Dockets", "LinkedCases", "Arrests", "Fees"],
        "sectionsEmpty": ["Sentences", "Warrants", "Bonds"],
        "totalDocketEntries": 121,
        "totalCharges": 1,
        "totalLinkedCases": 2,
        "totalFeeItems": 1,
        "totalBonds": 0
      },
      {
        "caseNumber": "50-2017-MM-013394-AXXX-MB",
        "defendant": "WILLIAMS, TASHIE K",
        "caseType": "MM (Misdemeanor)",
        "status": "Disposed",
        "sectionsWithData": ["Header", "Parties", "Charges", "Dockets", "Arrests", "Bonds", "Sentences", "Fees"],
        "sectionsEmpty": ["LinkedCases", "Warrants"],
        "totalDocketEntries": 37,
        "totalCharges": 1,
        "totalSentences": 1,
        "totalBonds": 1,
        "totalFeeItems": 5
      },
      {
        "caseNumber": "50-2017-CF-009771-AXXX-MB",
        "defendant": "JOSEPH, OLRITH",
        "caseType": "CF (Circuit Felony)",
        "status": "Disposed",
        "sectionsWithData": ["Header", "Parties", "Charges", "Dockets", "Arrests", "Bonds", "Sentences", "Warrants", "Fees"],
        "sectionsEmpty": ["LinkedCases"],
        "totalDocketEntries": 203,
        "totalCharges": 1,
        "totalSentences": 1,
        "totalWarrants": 1,
        "totalBonds": 2,
        "totalFeeItems": 5
      },
      {
        "caseNumber": "50-2017-MM-012630-AXXX-NB",
        "defendant": "KHAN, SHAZIM MICHAEL",
        "caseType": "MM (Misdemeanor)",
        "status": "Closed",
        "disposition": "PRETRIAL DIVERSION",
        "sectionsWithData": ["Header", "Parties", "Charges", "Dockets", "Arrests", "Bonds", "Warrants", "Fees"],
        "sectionsEmpty": ["LinkedCases", "Sentences"],
        "totalDocketEntries": 112,
        "totalCharges": 2,
        "totalWarrants": 2,
        "totalBonds": 5,
        "totalFeeItems": 2,
        "notes": "Charges dismissed via pretrial diversion - fees paid in full"
      }
    ],

    "validationChecks": [
      "Verify case number format: XX-YYYY-XX-NNNNNN-XXXX-XX",
      "Verify dates parse correctly (MM/DD/YYYY)",
      "Verify dollar amounts parse correctly ($X,XXX.XX)",
      "Verify empty tables return [] not null",
      "Verify multi-table sections extract from correct table numbers"
    ]
  }
}
